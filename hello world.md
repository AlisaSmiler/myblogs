1、C编译生成可执行文件的步骤



.c文件---------->-i文件---------->.s文件---------->.o文件---------->可执行文件

​         预处理               编译                    汇编               链接

​           -E                        -c                          -S                   直接用gcc命令不带任何参数   

gcc -E helloworld.c          

​                       gcc -c helloworld.c

​                                                              gcc -S helloworld.c

​                                                                                                    gcc helloworld.c -o helloworld.out

2、helloworld.c文件相关文件

```c
#include <stdio.h>
// 这是源文件
int main(){    
    printf("hello world\n");
    return 0;
}
```
// 预处理的文件：将头文件展开，宏替换

```c
extern char *ctermid (char *__s) __attribute__ ((__nothrow__));
# 908 "/usr/include/stdio.h" 3 4
extern void flockfile (FILE *__stream) __attribute__ ((__nothrow__));
        

             
extern int ftrylockfile (FILE *__stream) __attribute__ ((__nothrow__)) ;

    
extern void funlockfile (FILE *__stream) __attribute__ ((__nothrow__));
# 938 "/usr/include/stdio.h" 3 4

# 2 "helloworld.c" 2
int main(){
    
 printf("hello world\n");
 return 0;
}

```

// 编译阶段生成的文件

```
.LC0:
        .string "hello world"
        .text
.globl main
        .type   main, @function
main:
.LFB0:
        .cfi_startproc
        pushq   %rbp
        .cfi_def_cfa_offset 16
        .cfi_offset 6, -16
        movq    %rsp, %rbp
        .cfi_def_cfa_register 6
        movl    $.LC0, %edi
        call    puts
        movl    $0, %eax
        leave
        .cfi_def_cfa 7, 8
        ret
        .cfi_endproc
.LFE0:
        .size   main, .-main
        .ident  "GCC: (GNU) 4.4.7 20120313 (Red Hat 4.4.7-17)"
        .section        .note.GNU-stack,"",@progbits

```

// 汇编阶段

```

^?ELF^B^A^A^@^@^@^@^@^@^@^@^@^A^@>^@^A^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@8^A^@^@^@^@^@^@^@^@^@^@@^@^@^@^@^@@^@^M^@
^@UH<89>å¿^@^@^@^@è^@^@^@^@¸^@^@^@^@ÉÃ^@^@^@hello world^@^@GCC: (GNU) 4.4.7 20120313 (Red Hat 4.4.7-17)^@^@^@^@^@^@^@^T^@^@^@^@^@^@^@^AzR^@^Ax^P^A^[^L^G^H<90>^A^@^@^\^@^@^@^\^@^@^@^@^@^@^@^U^@^@^@^@A^N^P<86>^BC^M^FP^L^G^H^@^@^@^@.symtab^@.strtab^@.shstrtab^@.rela.text^@.data^@.bss^@.rodata^@.comment^@.note.GNU-stack^@.rela.eh_frame^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@ ^@^@^@^A^@^@^@^F^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@@^@^@^@^@^@^@^@^U^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^D^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^[^@^@^@^D^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@<98>^E^@^@^@^@^@^@0^@^@^@^@^@^@^@^K^@^@^@^A^@^@^@^H^@^@^@^@^@^@^@^X^@^@^@^@^@^@^@&^@^@^@^A^@^@^@^C^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@X^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^D^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@,^@^@^@^H^@^@^@^C^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@X^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^D^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@1^@^@^@^A^@^@^@^B^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@X^@^@^@^@^@^@^@^L^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^A^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@9^@^@^@^A^@^@^@0^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@d^@^@^@^@^@^@^@.^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^A^@^@^@^@^@^@^@^A^@^@^@^@^@^@^@B^@^@^@^A^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@<92>^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^A^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@W^@^@^@^A^@^@^@^B^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@<98>^@^@^@^@^@^@^@8^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@R^@^@^@^D^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@È^E^@^@^@^@^@^@^X^@^@^@^@^@^@^@^K^@^@^@^H^@^@^@^H^@^@^@^@^@^@^@^X^@^@^@^@^@^@^@^Q^@^@^@^C^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@Ð^@^@^@^@^@^@^@a^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^A^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^A^@^@^@^B^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@x^D^@^@^@^@^@^@^H^A^@^@^@^@^@^@^L^@^@^@  ^@^@^@^H^@^@^@^@^@^@^@^X^@^@^@^@^@^@^@  ^@^@^@^C^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@<80>^E^@^@^@^@^@^@^X^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^A^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^A^@^@^@^D^@ñÿ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^A^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^C^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^D^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^E^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^G^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^H^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^F^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^N^@^@^@^R^@^A^@^@^@^@^@^@^@^@^@^U^@^@^@^@^@^@^@^S^@^@^@^P^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@helloworld.c^@main^@puts^@^E^@^@^@^@^@^@^@
```

//链接阶段

```

^@`^C@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^K^@<90>^C@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^L^@¨^C@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^M^@à^C@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^N^@¸^E@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^O^@È^E@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^P^@ä^E@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^Q^@^H^F@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^R^@<88>^F`^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^S^@<98>^F`^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^T^@¨^F`^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^U^@°^F`^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^V^@@^H`^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^W^@H^H`^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^X^@p^H`^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^Y^@x^H`^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^C^@^Z^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^A^@^@^@^B^@^M^@^L^D@^@^@^@^@^@^@^@^@^@^@^@^@^@^Q^@^@^@^D^@ñÿ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^\^@^@^@^A^@^R^@<88>^F`^@^@^@^@^@^@^@^@^@^@^@^@^@*^@^@^@^A^@^S^@<98>^F`^@^@^@^@^@^@^@^@^@^@^@^@^@8^@^@^@^A^@^T^@¨^F`^@^@^@^@^@^@^@^@^@^@^@^@^@E^@^@^@^B^@^M^@0^D@^@^@^@^@^@^@^@^@^@^@^@^@^@[^@^@^@^A^@^Y^@x^H`^@^@^@^@^@^A^@^@^@^@^@^@^@j^@^@^@^A^@^Y^@<80>^H`^@^@^@^@^@^H^@^@^@^@^@^@^@x^@^@^@^B^@^M^@ ^D@^@^@^@^@^@^@^@^@^@^@^@^@^@^Q^@^@^@^D^@ñÿ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@<84>^@^@^@^A^@^R^@<90>^F`^@^@^@^@^@^@^@^@^@^@^@^@^@<91>^@^@^@^A^@^Q^@<80>^F@^@^@^@^@^@^@^@^@^@^@^@^@^@<9f>^@^@^@^A^@^T^@¨^F`^@^@^@^@^@^@^@^@^@^@^@^@^@«^@^@^@^B^@^M^@<80>^E@^@^@^@^@^@^@^@^@^@^@^@^@^@Á^@^@^@^D^@ñÿ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@Î^@^@^@^A^@^W^@H^H`^@^@^@^@^@^@^@^@^@^@^@^@^@ä^@^@^@^@^@^R^@<84>^F`^@^@^@^@^@^@^@^@^@^@^@^@^@õ^@^@^@^@^@^R^@<84>^F`^@^@^@^@^@^@^@^@^@^@^@^@^@^H^A^@^@^A^@^U^@°^F`^@^@^@^@^@^@^@^@^@^@^@^@^@^Q^A^@^@ ^@^X^@p^H`^@^@^@^@^@^@^@^@^@^@^@^@^@^\^A^@^@^R^@^M^@à^D@^@^@^@^@^@^B^@^@^@^@^@^@^@,^A^@^@^R^@^M^@à^C@^@^@^@^@^@^@^@^@^@^@^@^@^@3^A^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@B^A^@^@ ^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@V^A^@^@^R^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@h^A^@^@^R^@^N^@¸^E@^@^@^@^@^@^@^@^@^@^@^@^@^@n^A^@^@^R^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@<8d>^A^@^@^Q^@^O^@È^E@^@^@^@^@^@^D^@^@^@^@^@^@^@<9c>^A^@^@^P^@^X^@p^H`^@^@^@^@^@^@^@^@^@^@^@^@^@©^A^@^@^Q^B^O^@Ð^E@^@^@^@^@^@^@^@^@^@^@^@^@^@¶^A^@^@^Q^B^S^@ ^F`^@^@^@^@^@^@^@^@^@^@^@^@^@Ã^A^@^@^R^@^M^@ð^D@^@^@^@^@^@<89>^@^@^@^@^@^@^@Ó^A^@^@^P^@ñÿt^H`^@^@^@^@^@^@^@^@^@^@^@^@^@ß^A^@^@^P^@ñÿ<88>^H`^@^@^@^@^@^@^@^@^@^@^@^@^@ä^A^@^@^P^@ñÿt^H`^@^@^@^@^@^@^@^@^@^@^@^@^@ë^A^@^@^R^@^M^@Ä^D@^@^@^@^@^@^U^@^@^@^@^@^@^@ð^A^@^@^R^@^K^@<90>^C@^@^@^@^@^@^@^@^@^@^@^@^@^@^@call_gmon_start^@crtstuff.c^@__CTOR_LIST__^@__DTOR_LIST__^@__JCR_LIST__^@__do_globa
```



3、对于宏的理解

宏是替换字符串，不做任何运算

注意为了防止优先级的影响，尽量为宏函数加上括号（每个输入都加）

```c

#include <stdio.h>
#define R 10
#define ADD(a,b) ((a)+(b))
#define M int main(){
#define MULTY(a,b) ((a) * (b))


int add(int a, int b){
        return a+b;
}
typedef unsigned long LongSize;


M

        int a = R;
        printf("a=%d\n", a);

        int b = add(10.0, 10.5);
        printf("b=%d\n", b);

        float c = ADD(10.0, 10.5);
        printf("c=%f\n", c);

        printf("hello world\n");

        LongSize d = 100;
        printf("d=%d\n", d);


        int * p = &a;
        int q = ADD( 2, *p);
        printf("q=%d\n",q);


        //int f = a + 1;
        //int g = a + 1;
        int h = MULTY(a+1,a+1);
        printf("h=%d\n", h);

        return 0;


}
```

```
[root@localhost cprocedure]# gcc helloworld.c
[root@localhost cprocedure]# ./a.out 
a=10
b=20
c=20.500000
hello world
d=100
q=12
h=121
```

